<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>CRUD</title>
</head>
    <body>
        <header>
            <h1>Projeto - CRUD</h1>
        </header>
        <section class="formulario">
            <form class="form" method="POST" action="" onsubmit="return false">
                <div class="container-form align-items-center">
                    <div class="input-12 form-inline">
                        <div class="form-floating mb-4 input-9">
                            <input type="text" class="form-control" id="nome" placeholder="">
                            <label for="nome">Nome</label>
                            <div id="nome-invalido" class="form-text input-valido text-danger">Nome obrigatório!</div>
                        </div>
                        <div class="form-floating mb-4 input-3">
                            <input type="number" class="form-control" id="idade" placeholder="">
                            <label for="idade">Idade</label>
                            <div id="idade-invalido" class="form-text input-valido text-danger">Idade inválida!</div>
                        </div>
                    </div>
                    <div class="form-floating mb-4 input-12">
                        <input type="email" class="form-control" id="email" placeholder="">
                        <label for="email">Email</label>
                        <div id="email-invalido" class="form-text input-valido text-danger">E-mail inválido!</div>
                    </div>           
                    <div class="form-floating mb-4 input-12">
                        <input type="text" class="form-control" id="telefone" placeholder="">
                        <label for="telefone">Telefone</label>
                        <div id="telefone-invalido" class="form-text input-valido text-danger">Telefone inválido!</div>
                    </div>
                </div>
                <div class="flex-row">
                    <button class="btn btn-primary submmit" name="enviar" onclick="validaForm()">Enviar</button>
                    <button class="btn btn-danger submmit" name="reset" onclick="resetForm()">Resetar</button>
                </div> 
            </form>
        </section>
        <section class="container-grid">        
            <table class="table table-striped-columns table-dark border-table">
                <thead>
                    <tr>
                        <th scope="col">Nome</th>
                        <th scope="col">Idade</th>
                        <th scope="col">Email</th>
                        <th scope="col">Telefone</th>
                        <th class="text-center" scope="col">Ações</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th scope="row">Matheus Morais</th>
                        <td>15</td>
                        <td>matheus@gmail.com</td>
                        <td>(11)9999-9999</td>
                        <td>
                            <div class="d-flex justify-content-evenly text-center">
                                <button class="btn btn-sm btn-warning" name="editar" onclick="editaLinha()">Editar</button>
                                <button class="btn btn-sm btn-danger" name="excluir" onclick="excluiLinha()">Excluir</button>
                            </div> 
                        </td>
                    </tr>
                    <tr>
                      <th scope="row">Matheus Morais</th>
                      <td>15</td>
                      <td>matheus@gmail.com</td>
                      <td>(11)9999-9999</td>
                      <td>
                        <div class="d-flex justify-content-evenly text-center">
                            <button class="btn btn-sm btn-warning" name="editar" onclick="editaLinha()">Editar</button>
                            <button class="btn btn-sm btn-danger" name="excluir" onclick="excluiLinha()">Excluir</button>
                        </div> 
                      </td>
                    </tr>
                    <tr>
                      <th scope="row">Matheus Morais</th>
                      <td>15</td>
                      <td>matheus@gmail.com</td>
                      <td>(11)9999-9999</td>
                      <td>
                        <div class="d-flex justify-content-evenly text-center">
                            <button class="btn btn-sm btn-warning" name="editar" onclick="editaLinha()">Editar</button>
                            <button class="btn btn-sm btn-danger" name="excluir" onclick="excluiLinha()">Excluir</button>
                        </div> 
                      </td>
                    </tr>
                    <tr>
                        <th scope="row">Matheus Morais</th>
                        <td>15</td>
                        <td>matheus@gmail.com</td>
                        <td>(11)9999-9999</td>
                        <td>
                            <div class="d-flex justify-content-evenly text-center">
                                <button class="btn btn-sm btn-warning" name="editar" onclick="editaLinha()">Editar</button>
                                <button class="btn btn-sm btn-danger" name="excluir" onclick="excluiLinha()">Excluir</button>
                            </div> 
                        </td>
                    </tr>
                </tbody>
            </table>        
        </section>
    </body>
    <script>

        $tipos = [
            "UserName",
            "Age",
            "Email",
            "phoneNumber"
        ];

        $nomes = [];
        $emails = [];
        $idades = [];
        $telefones = [];

        let userName = document.getElementById('nome');
        let age = document.getElementById('idade');
        let email = document.getElementById('email');
        let phoneNumber = document.getElementById('telefone');

        isValid = true;

        // $isValidNome = true;
        // $isValidEmail = true;
        // $isValidIdade = true;
        // $isValidTelefone = true;
        

        function validaForm(){
            isValid = true;            
            
            validaCampo(userName.value, $tipos[0]);
            validaCampo(age.value, $tipos[1]);
            validaCampo(email.value, $tipos[2]);
            validaCampo(phoneNumber.value, $tipos[3]);
            
            if(isValid === true){
                userName.value = "";
                age.value = "";
                email.value = "";
                phoneNumber.value = "";

                $nomes.push(userName.value);
                $idades.push(age.value);
                $emails.push(email.value);
                $telefones.push(phoneNumber.value);

                // alert("Informações inseridas realizado com sucesso!");
            }
            
            return isValid;
        }

        function resetForm(){
            window.location.reload(true);
        }

        function validaCampo(value, tipo){
            switch (tipo){
		        case $tipos[0]:  		            
  		            {
                        let nameInv = document.getElementById('nome-invalido');


                        if(value && value !== ""){
                            nameInv.classList.add('input-valido');
                            userName.classList.remove('input-value-invalido');
                            console.log("o nome é valido!");
                        }
                        else
                        {                            
                            nameInv.classList.remove('input-valido');
                            userName.classList.add('input-value-invalido');
                            console.log("o nome é invalido!");

                            isValid = false;
                        }
                    }
  		        break;
		        case $tipos[1]:  		            
                    {
                        let ageInv = document.getElementById('idade-invalido');

                        if(value && value > 17 && value < 120){                            
                            ageInv.classList.add('input-valido');
                            age.classList.remove('input-value-invalido');
                            console.log("a idade é valido!");
                        }
                        else
                        {                         
                            ageInv.classList.remove('input-valido');
                            age.classList.add('input-value-invalido');
                            console.log("a idade é invalido!");

                            isValid = false;
                        }
                    }
  		        break;
                case $tipos[2]:
  		            {
                        let emailInv = document.getElementById('email-invalido');

                        if(value && value!== "" && value.includes('@')){ //&& value.toString().includes('@')
                              //Utilizar regex para validar o email 
                             emailInv.classList.add('input-valido');
                             email.classList.remove('input-value-invalido');
                             console.log("o email é valido!");
                        }
                        else
                        {                            
                            emailInv.classList.remove('input-valido');
                            email.classList.add('input-value-invalido');
                            console.log("o email é invalido!");
                            
                            isValid = false;
                        }
                    }
  		        break;
                case $tipos[3]:
                    {                                                
                        let numberInv = document.getElementById('telefone-invalido');

                        if(value && value !== "" && value){
                            numberInv.classList.add('input-valido');
                            phoneNumber.classList.remove('input-value-invalido');
                            console.log("o telefone é valido!");
                        }
                        else
                        {
                            numberInv.classList.remove('input-valido');
                            phoneNumber.classList.add('input-value-invalido');
                            console.log("o telefone é invalido!");

                            isValid = false;
                        }
                    }
  		        break;
  	            default:
    		        console.log('Tipo inválido!');
            }
        }

        function adicionarAcoes(){
            //
        }

        function apoio(){
            const button = document.createElement("button");
            button.classList.add("button"); // adicionando a classe ".button" no elemento - os estilos serão aplicados a este elemento.
            button.innerText = 'Hello, world!';
            document.body.appendChild(button);
        }

    </script>
</html>